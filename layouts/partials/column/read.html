{{/* 阅读列模板 */}}
<ul class="read-grid">
    {{ range .pages }}
    <li class="read-item">
        <a href="{{ .RelPermalink }}" title="{{ .Title }}" class="read-link">
            {{ $coverImage := "" }}
            {{ if .Params.cover }}
            {{ $coverImage = .Params.cover | absURL }}
            {{ else if .Resources }}
            {{ $images := .Resources.Match "**. {jpg,jpeg,png,gif}" }}
            {{ if $images }}
            {{ $coverImage = (index $images 0).RelPermalink }}
            {{ end }}
            {{ end }}

            {{ if not $coverImage }}
            {{ $imgRegex := `<img[^>]+src="([^"]+)"` }}
                {{ $matches := findRE $imgRegex .Content 1 }}
                {{ if $matches }}
                {{ $coverImage = replaceRE $imgRegex "$1" (index $matches 0) }}
                {{ end }}
                {{ end }}

                {{ if $coverImage }}
                <img src="{{ $coverImage }}" alt="{{ .Title }}" class="read-cover">
                {{ else }}
                <div class="read-cover read-cover--gradient"></div>
                {{ end }}

                <span class="read-title">{{ .Title }}</span>
        </a>
    </li>
    {{ end }}
</ul>